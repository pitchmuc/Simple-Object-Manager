"use strict";class Som{constructor(t,e,s=!0){function i(){const t=new WeakSet;return(e,s)=>{if("object"==typeof s&&null!==s){if(t.has(s))return;t.add(s)}return s}}if(this.data={},this.defaultvalue=e,"object"==typeof t&&t instanceof Som==0)if(Array.isArray(t)&&t.length>0){let e=this.data;t.forEach((function(t){if(s)try{e=Object.assign(e,JSON.parse(JSON.stringify(t)))}catch(s){console.warn("issue assigning object, trying removing circular references."),e=Object.assign(e,JSON.parse(JSON.stringify(t,i())))}else e=Object.assign(e,t)}))}else try{this.data=s?Object.assign({},JSON.parse(JSON.stringify(t))):t}catch(e){console.warn("issue assigning object, trying removing circular references."),this.data=Object.assign({},JSON.parse(JSON.stringify(t,i())))}else if("object"==typeof t&&t instanceof Som==1)try{this.data=Object.assign({},JSON.parse(JSON.stringify(t.data)))}catch(e){console.warn("issue assigning object, trying removing circular references."),this.data=Object.assign({},JSON.parse(JSON.stringify(t.data,i())))}}get(t,e){if(void 0===t||""==t)return this.data;if("string"==typeof t){for(var s=t.split("."),i=this.data,a=0;a<s.length&&null!=i;a++)i=Array.isArray(i)&&Math.abs(parseInt(s[a]))<=i.length?parseInt(s[a])<0?i[i.length-Math.abs(parseInt(s[a]))]:i[parseInt(s[a])]:Array.isArray(i)&&Math.abs(parseInt(s[a]))>i.length?e||this.defaultvalue||void 0:i[s[a]];return i||e||this.defaultvalue||void 0}}assign(t,e,s){void 0===e&&(e=s);let i="override"==arguments[3];if(void 0!==t&&""!=t&&"string"==typeof t)for(var a=t.split("."),r=this.data,n=0;n<a.length&&null!=r;n++)if("string"==typeof a[n]&&1==isNaN(a[n]))if(Object(r).hasOwnProperty(a[n]))n==a.length-1?Array.isArray(r[a[n]])?i?r[a[n]]=e:r[a[n]].push(e):r[a[n]]=e:("string"==typeof r[a[n]]&&(r[a[n]]={}),r=r[a[n]]);else if(n==a.length-1){if("object"!=typeof r)return;r[a[n]]=e}else isNaN(a[n+1])?r[a[n]]={}:r[a[n]]=[],r=r[a[n]];else"string"==typeof a[n]&&0==isNaN(a[n])&&(Array.isArray(r)&&Math.abs(a[n])<r.length?n==a.length-1?r[a[n]]=e:r=r[a[n]]:Array.isArray(r)&&a[n]>=r.length&&(n==a.length-1?r.push(e):(r.push({}),r=r[r.length-1])));else"object"==typeof t&&(this.data=Object.assign(this.data,t));return this.data}merge(t,e){if("object"==typeof t&&void 0===e)e=t,t=void 0;else if("string"==typeof t&&"object"==typeof e);else if("object"==typeof t&&"string"==typeof e){let s=t;t=e,e=s}if(void 0===t||""==t)return this.data=Object.assign(this.data,JSON.parse(JSON.stringify(e))),this.data;for(var s=t.split("."),i=this.data,a=0;a<s.length&&null!=i;a++)i=Array.isArray(i)&&Math.abs(parseInt(s[a]))<=i.length?parseInt(s[a])<0?i[i.length-Math.abs(parseInt(s[a]))]:i[parseInt(s[a])]:Array.isArray(i)&&Math.abs(parseInt(s[a]))>i.length?this.defaultvalue||void 0:i[s[a]];if(void 0!==i||i!=this.defaultvalue){if(Array.isArray(i)&&Array.isArray(e))e.forEach((function(t){i.push(t)}));else{var r=Object.assign(i,JSON.parse(JSON.stringify(e)));this.data=this.assign(t,r)}return this.data}return this.assign(t,e),this.data}remove(t,e){if(void 0===e&&(e=!1),""==t||void 0===t)this.clear();else for(var s=t.split("."),i=this.data,a=0;a<s.length&&null!=i;a++)if("string"==typeof s[a]&&1==isNaN(s[a])){if(!Object(i).hasOwnProperty(s[a]))return this.data;a==s.length-1?"object"==typeof i[s[a]]||e?delete i[s[a]]:i[s[a]]=void 0:i=i[s[a]]}else if("string"==typeof s[a]&&0==isNaN(s[a])){if(!(Array.isArray(i)&&Math.abs(s[a])<i.length))return this.data;if(a==s.length-1)return i.splice(s[a],1),this.data;i=i[s[a]]}}push(t,e,s=!1){if(""==t||void 0===t)this.data=[this.data],this.data.push(e);else if(t.length>0){let i=this.get(t);if(void 0===i||s)this.assign(t,[e],void 0,"override");else if(Array.isArray(i))i.push(e);else if(("object"==typeof i||"string"==typeof i)&&0==s){let s=[i,e];this.assign(t,s)}}return this.data}mergeDeep(t,e,s){if("string"==typeof t?s=s||this.get(t):"object"==typeof t&&(s=e||this.data,e=t),"object"!=typeof e)throw new Error("expect an object as input");let i=s||this.data;for(let t in e)if("object"!=typeof e[t])i[t]=e[t];else if("object"==typeof e[t])if("object"!=typeof i[t])i[t]=e[t];else if(!1===Array.isArray(e[t])&&!1===Array.isArray(i[t]))this.mergeDeep(e[t],i[t]);else if(Array.isArray(e[t])&&Array.isArray(i[t]))for(let s=0;s<Math.max(e[t].length,i[t].length);s++)void 0===e[t][s]||(void 0===i[t][s]?i[t][s]=e[t][s]:"object"!=typeof e[t][s]?-1==i[t].indexOf(e[t][s])&&i[t].push(e[t][s]):this.mergeDeep(e[t][s],i[t][s]))}replace(t,e,s=!1){let i,a=arguments[3]||this.data;if(s&&(i=new RegExp(t)),"object"==typeof a)for(let r in a)if("object"!=typeof a[r])s?i.test(a[r])&&(a[r]=e):a[r]==t&&(a[r]=e);else if("object"==typeof a[r])if(Array.isArray(a[r])){let i=this,n=a[r].indexOf(t);-1!=n?a[r][n]=e:a[r].forEach((function(a){"object"==typeof a&&i.replace(t,e,s,a)}))}else this.replace(t,e,s,a[r])}clear(){this.data={}}}