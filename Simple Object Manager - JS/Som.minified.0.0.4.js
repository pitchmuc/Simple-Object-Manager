"use strict";class Som{constructor(a,c){function b(){let a=new WeakSet;return(c,b)=>{if("object"==typeof b&&null!==b){if(a.has(b))return;a.add(b)}return b}}if(this.data={},this.defaultvalue=c,"object"==typeof a&&a instanceof Som== !1){if(Array.isArray(a)&&a.length>0){let d=this.data;a.forEach(function(a){d=Object.assign(d,JSON.parse(JSON.stringify(a)))})}else try{this.data=Object.assign({},JSON.parse(JSON.stringify(a)))}catch(e){console.warn("issue assigning object, trying removing circular references."),this.data=Object.assign({},JSON.parse(JSON.stringify(a,b())))}}else if("object"==typeof a&&a instanceof Som== !0)try{this.data=Object.assign({},JSON.parse(JSON.stringify(a.data)))}catch(f){console.warn("issue assigning object, trying removing circular references."),this.data=Object.assign({},JSON.parse(JSON.stringify(a.data,b())))}}get(d,e){if(void 0===d||""==d)return this.data;if("string"==typeof d){for(var c=d.split("."),a=this.data,b=0;b<c.length&& void 0!=a;b++)a=Array.isArray(a)&&Math.abs(parseInt(c[b]))<=a.length?0>parseInt(c[b])?a[a.length-Math.abs(parseInt(c[b]))]:a[parseInt(c[b])]:Array.isArray(a)&&Math.abs(parseInt(c[b]))>a.length?e||this.defaultvalue||void 0:a[c[b]];return a||e||this.defaultvalue||void 0}}assign(e,d,f){if(void 0===d&&(d=f),void 0!==e&&""!=e&&"string"==typeof e)for(var c=e.split("."),a=this.data,b=0;b<c.length&& void 0!=a;b++)if("string"==typeof c[b]&& !0==isNaN(c[b])){if(Object(a).hasOwnProperty(c[b]))b==c.length-1?Array.isArray(a[c[b]])?a[c[b]].push(d):a[c[b]]=d:("string"==typeof a[c[b]]&&(a[c[b]]={}),a=a[c[b]]);else if(b==c.length-1){if("object"!=typeof a)return;a[c[b]]=d}else isNaN(c[b+1])?a[c[b]]={}:a[c[b]]=[],a=a[c[b]]}else"string"==typeof c[b]&& !1==isNaN(c[b])&&(Array.isArray(a)&&Math.abs(c[b])<a.length?b==c.length-1?a[c[b]]=d:a=a[c[b]]:Array.isArray(a)&&c[b]>=a.length&&(b==c.length-1?a.push(d):(a.push({}),a=a[a.length-1])));else"object"==typeof e&&(this.data=Object.assign(this.data,e));return this.data}merge(d,e){if(void 0===e||""==e)return this.data=Object.assign(this.data,JSON.parse(JSON.stringify(d))),this.data;for(var c=e.split("."),a=this.data,b=0;b<c.length&& void 0!=a;b++)a=Array.isArray(a)&&Math.abs(parseInt(c[b]))<=a.length?0>parseInt(c[b])?a[a.length-Math.abs(parseInt(c[b]))]:a[parseInt(c[b])]:Array.isArray(a)&&Math.abs(parseInt(c[b]))>a.length?this.defaultvalue||void 0:a[c[b]];if(void 0!==a||a!=this.defaultvalue){if(Array.isArray(a)&&Array.isArray(d))d.forEach(function(b){a.push(b)});else{var f=Object.assign(a,JSON.parse(JSON.stringify(d)));this.data=this.assign(e,f)}return this.data}}remove(d,e){if(void 0===e&&(e=!1),""==d|| void 0===d)this.clear();else for(var b=d.split("."),c=this.data,a=0;a<b.length&& void 0!=c;a++)if("string"==typeof b[a]&& !0==isNaN(b[a])){if(!Object(c).hasOwnProperty(b[a]))return this.data;a==b.length-1?"object"==typeof c[b[a]]?delete c[b[a]]:e?delete c[b[a]]:c[b[a]]=void 0:c=c[b[a]]}else if("string"==typeof b[a]&& !1==isNaN(b[a])){if(!(Array.isArray(c)&&Math.abs(b[a])<c.length))return this.data;if(a==b.length-1)return c.splice(b[a],1),this.data;c=c[b[a]]}}clear(){this.data={}}}